<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .box {
        width: 200px;
        height: auto;
      }

      .holder {
        border: solid black 1px;
        margin: 10px;
      }
    </style>
  </head>
  <body>
    <p class="arraying">array</p>
    <div class="box"></div>

    <p class="d">0</p>
    <button class="i">Increment</button>
    <button class="de">decrement</button>

    <p class="d-2">0</p>
    <button class="i-2">Increment</button>
    <button class="de-2">decrement</button>

    <input type="text" id="searchInput" placeholder="Search..." />
    <ul id="searchResults"></ul>
  </body>
  <script>
    const arraying = document.querySelector(".arraying");
    const output = document.querySelector(".box");
    const searchbar = document.getElementById("searchbar");

    const searchInput = document.getElementById("searchInput");
    const searchResults = document.getElementById("searchResults");

    let product = [
      {
        nama: "habib",
        kelas: "11 pplg 1",
        hobi: ["sepak bola", "futsal"],
      },
      {
        nama: "abdillah",
        kelas: "11 pplg 1",
        hobi: ["takraw", "futsal"],
      },

      {
        nama: "Jarwo",
        kelas: "11 pplg 1",
        hobi: [],
      },
    ];

    let search = [];
    let nama;
    let hobi;
    let kelas;

    product.forEach((nwp) => {
      nama = nwp.nama.toLowerCase();
      hobi = nwp.hobi.map((hobi) => hobi.toLowerCase());
      kelas = nwp.kelas.toLocaleLowerCase();

      search.push({
        snama: nama,
        shobi: hobi,
        skelas: kelas,
      });
    });

    console.log(search);

    searchInput.addEventListener("keyup", (e) => {
      iValue = searchInput.value.toLowerCase();

      let filtered = search.filter((item) => {
        return (
          item.snama.includes(iValue) ||
          item.skelas.includes(iValue) ||
          item.shobi.some((h) => h.toLowerCase().includes(iValue))
        );
      });

      display(filtered);
    });

    function display(results) {
      let searchHtml = "";
      if (results.length === 0) {
        searchHtml = `
        <div class="holder">
          <p>Tidak Ada Data</p>
        </div>
        `;
        output.innerHTML = searchHtml;
      }

      results.forEach((e) => {
        let isHobi = e.shobi.length > 0 ? e.shobi : "Gaada Hobi";

        searchHtml += `
        <div class="holder">
            <p class="nama">Nama : ${e.snama}</p>
            <p class="kelas">Kelas : ${e.skelas}</p>
            <p class="hobi">Hobi : ${isHobi}</p>
        </div>`;

        output.innerHTML = searchHtml;
      });
    }

    let htmls = "";

    search.forEach((element) => {
      let isHobi = element.shobi.length > 0 ? element.shobi : "Gaada Hobi";
      htmls += `
      <div class="holder">
            <p class="nama">Nama : ${element.snama}</p>
            <p class="kelas">Kelas : ${element.skelas}</p>
            <p class="hobi">Hobi : ${isHobi}</p>
        </div>`;

      output.innerHTML = htmls;

      console.log(element);
      console.log(element.hobi);
    });
  </script>
  <script type="module" src="tsti.js"></script>
</html>
